// https://blog.risingstack.com/d3version4-js-tutorial-bar-charts-with-javascript/
"use strict";


let startDate = new Date("5/18/04 8:52");
let endDate = new Date("5/17/18 8:52");
let dataCache = undefined;

let $endDate = $('#endDate');
let $startDate = $('#startDate');

$startDate.datepicker({
    uiLibrary: 'bootstrap4'
});
$endDate.datepicker({
    uiLibrary: 'bootstrap4'
});

$startDate.val(startDate.toLocaleDateString());
$endDate.val(endDate.toLocaleDateString());

d3version4.csv("david_files/data/thread_sta_out.csv", render);

$( "#render" ).click(function() {
    if(!dataCache) {
        alert("Data not loaded. Please wait")
    }
    else render(dataCache);
});

function render(data) {
    if($startDate.val() !== "") startDate = new Date($('#startDate').val());
    if($endDate.val() !== "") endDate = new Date($('#endDate').val());
    if(!dataCache) dataCache = data;
    drawresolved(data, startDate, endDate);
    barchart(data, startDate, endDate);
    linechart(data, startDate, endDate);
    drawWordCloud(data, startDate, endDate);
}
